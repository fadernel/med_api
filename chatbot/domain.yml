version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - give_api
  - thanks
  - use_model
  - show_pdf
  - out_of_scope

actions:
  - action_process_image
  - action_create_pdf

forms:
  user_form:
    required_slots:
      - user_name
      - user_age
      - user_birth
      - user_address
      - user_height
      - user_weight

slots:
  user_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: user_form
            requested_slot: user_name
  user_age:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: user_form
            requested_slot: user_age
  user_birth:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: user_form
            requested_slot: user_birth
  user_address:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: user_form
            requested_slot: user_address
  user_height:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: user_form
            requested_slot: user_height
  user_weight:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: user_form
            requested_slot: user_weight

responses:
  utter_greet:
  - text: "Hey! How are you?"
  - text: "Hello! How are you?"

  utter_cheer_up:
  - text: "Here is something to cheer you up:"
    image: "https://styles.redditmedia.com/t5_7unw9n/styles/communityIcon_u16solb39hka1.png"

  utter_image_xray:
  - text: "We are going to analize this image:"
    image: "http://localhost:8000/xray_image"

  utter_pdf_xray:
  - text: "Here is the analysis report:"
    custom:
        payload: pdf_attachment
        title: "PDF report"
        url: "http://localhost:8000/xray_pdf"

  utter_did_that_help:
  - text: "Did that help you?"

  utter_happy:
  - text: "Great, carry on!"

  utter_goodbye:
  - text: "Bye"
  - text: "See you later"

  utter_iamabot:
  - text: "I am a bot, powered by Rasa."

  utter_out_of_scope:
  - text: Sorry, I can't handle that request.
  - text: Sorry, I can't understand that request.

  utter_please_rephrase:
  - text: I'm sorry, I didn't quite understand that. Could you rephrase?

  utter_analyzing_image:
  - text: The image is being analyzed 
  - text: Analyzing image
  - text: Validating image

  utter_fill_data:
  - text: Ok, so I need the patient's information
  - text: Fine, so please fill out the patient's information

  utter_ask_user_name:
  - text: Can I have their name?
  - text: Could you give me their name?
  - text: Please write their name


  utter_ask_user_age:
  - text: Can I have their age?
  - text: Could you give me their age?
  - text: Please write their age

  utter_ask_user_birth:
  - text: Can I have their birth date?
  - text: Could you give me their birth date?
  - text: Please write their birth date

  utter_ask_user_address:
  - text: Can I have their address?
  - text: Could you give me their address?
  - text: Please write their address

  utter_ask_user_height:
  - text: Can I have their height?
  - text: Could you give me their height?
  - text: Please write their height

  utter_ask_user_weight:
  - text: Can I have their weight?
  - text: Could you give me their weight?
  - text: Please write their weight?

  utter_submit:
  - text: Ok. Thanks!
  - text: Thank you very much!

  utter_slots_values:
  - text: Excellent, the information of {user_name} is stored
  - text: The information of the patient {user_name} was stored

  utter_requeriment:
  - text: Please, write your requirement
  - text: Could you write your requirement

  utter_upload_file:
  - text: Now, upload the X-ray image using the paperclip button
  - text: Please, upload the X-ray image using the paperclip button

  utter_thanks_contact:
  - text: Thank you for contacting us

  utter_ask_report:
  - text: Do you want to generate a pdf report?


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
